import{a as ie,b as ae,c as ce,e as me}from"./chunk-W32F6OZF.js";import{a as re}from"./chunk-MG5G4BKY.js";import"./chunk-37DJIMBO.js";import{A as oe,C as ne,a as $,g as q,j as G,k as I,l as d,m as K,o as W,p as J,q as Q,s as E,t as X,u as Y,v as Z,y as ee,z as te}from"./chunk-UHDG3LV6.js";import{$a as a,Cb as _,Db as M,Eb as N,Fb as R,Ka as r,P as S,R as b,U as D,Ya as f,_ as s,ca as C,db as i,eb as c,f as y,fb as l,fc as H,gb as V,gc as x,hb as A,ib as w,ic as k,jb as j,kb as g,ma as u,na as P,qb as U,rb as p,sb as z,tb as v,ub as B,za as T,zb as h}from"./chunk-T6VZZ3TQ.js";var pe=(()=>{class e{api_url=s(Q);http=s($);getProjects(){return this.http.get(`${this.api_url}/projects`,{withCredentials:!0})}createProject(t){return this.http.post(`${this.api_url}/projects`,t,{withCredentials:!0})}checkEmail(t){return this.http.post(`${this.api_url}/users/validate`,{email:t},{withCredentials:!0})}static \u0275fac=function(o){return new(o||e)};static \u0275prov=D({token:e,factory:e.\u0275fac,providedIn:"root"})}return e})();var le={projects:[],isLoading:!1},F=K({providedIn:"root"},J(le),W((e,m=s(pe),t=s(q))=>({getProjects:I(y(b(()=>d(e,{isLoading:!0})),S(()=>m.getProjects().pipe(E({next:o=>{d(e,{projects:o,isLoading:!1})},error:o=>{d(e,{isLoading:!1}),console.error(o)}}))))),createProject:I(y(b(()=>d(e,{isLoading:!0})),S(({payload:o})=>m.createProject(o).pipe(E({next:n=>{d(e,{isLoading:!1}),t.navigate(["/projects",n.message])},error:n=>{d(e,{isLoading:!1}),console.error(n)}}))))),checkEmail(o){return m.checkEmail(o)}})));function fe(e,m){if(e&1&&(i(0,"div",1)(1,"div",2)(2,"span"),p(3),c()(),i(4,"div",3)(5,"div",4),l(6,"kms-avatar",5),_(7,"avatarUrl"),c(),i(8,"div",6)(9,"span",7),p(10),c(),i(11,"span",8),p(12),c()()(),i(13,"div",9),l(14,"kms-avatar-group",10),_(15,"flatProperty"),c(),i(16,"div",11),l(17,"kms-button",12),c(),i(18,"div",13)(19,"span"),p(20),_(21,"readableDate"),c(),i(22,"span"),p(23),_(24,"readableDate"),c()()()),e&2){let t=m.ngIf;r(3),z(t.name),r(3),a("image",M(7,12,t.moderator.avatar))("size",36),r(3),a("identifyUser",t.moderator.id),r(),B(" ",t.moderator.firstName," ",t.moderator.lastName," "),r(2),v(" ",t.moderator.email," "),r(2),a("avatars",N(15,14,t.participants,"avatar"))("count",7),r(3),a("link",t.slug),r(3),v(" Created At: ",M(21,17,t.createdAt)," "),r(3),v(" Last Action: ",M(24,19,t.updatedAt)," ")}}var L=(()=>{class e{cookieService=s(Y);project=T.required();checkUser(t){return t===this.cookieService.get(X.ID)}static \u0275fac=function(o){return new(o||e)};static \u0275cmp=C({type:e,selectors:[["kms-project-card"]],inputs:{project:[1,"project"]},standalone:!0,features:[h],decls:1,vars:1,consts:[["class","container",4,"ngIf"],[1,"container"],[1,"info-block","title"],[1,"info-block","moderator"],[1,"moderator__avatar"],[3,"image","size"],[1,"moderator__info"],[3,"identifyUser"],[1,"moderator__email"],[1,"info-block","members"],[3,"avatars","count"],[1,"info-block","actions"],["label","Go To Board","fullWidth","","plain","",3,"link"],[1,"info-block","timings"]],template:function(o,n){o&1&&f(0,fe,25,21,"div",0),o&2&&a("ngIf",n.project())},dependencies:[k,x,re,ie,ne,ee,Z,te,oe],styles:["[_nghost-%COMP%]{display:block;background:var(--greyLight-1);box-shadow:var(--shadow);padding:1rem;border-radius:1rem;flex-shrink:0;flex-grow:0}[_nghost-%COMP%]   .container[_ngcontent-%COMP%]   .info-block[_ngcontent-%COMP%]:not(:last-child){border-bottom:1px solid var(--greyLight-2);margin-bottom:.5rem;padding-bottom:.5rem}[_nghost-%COMP%]   .container[_ngcontent-%COMP%]   .title[_ngcontent-%COMP%]{font-size:18px}[_nghost-%COMP%]   .container[_ngcontent-%COMP%]   .moderator[_ngcontent-%COMP%]{display:flex;gap:.7rem}[_nghost-%COMP%]   .container[_ngcontent-%COMP%]   .moderator[_ngcontent-%COMP%]   .moderator__info[_ngcontent-%COMP%]{display:flex;flex-direction:column;justify-content:center}[_nghost-%COMP%]   .container[_ngcontent-%COMP%]   .moderator[_ngcontent-%COMP%]   .moderator__info[_ngcontent-%COMP%]   .moderator__email[_ngcontent-%COMP%]{font-size:14px}[_nghost-%COMP%]   .container[_ngcontent-%COMP%]   .timings[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{display:block;color:var(--greyLight-3)}[_nghost-%COMP%]   .container[_ngcontent-%COMP%]   .timings[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]:not(:last-child){margin-bottom:.2rem}"],changeDetection:0})}return e})();function ge(e,m){if(e&1&&l(0,"kms-project-card",6),e&2){let t=m.$implicit;a("project",t)}}function _e(e,m){if(e&1){let t=w();V(0),f(1,ge,1,1,"kms-project-card",3),i(2,"div",4),j("click",function(){u(t);let n=g();return P(n.modalService.setVisible())}),l(3,"i",5),i(4,"span"),p(5,"Create New Project"),c()(),A()}if(e&2){let t=m.ngIf;r(),a("ngForOf",t)}}function Ce(e,m){e&1&&p(0," skeleton ")}function ue(e,m){if(e&1){let t=w();i(0,"kms-modal",7),j("onHide",function(){u(t);let n=g();return P(n.modalService.setInvisible())}),i(1,"div",8)(2,"kms-project-form",9),j("onFormSubmit",function(n){u(t);let O=g();return P(O.createProject(n))}),c()()()}if(e&2){let t=g();r(2),a("checkEmail",t.projectsStore.checkEmail)}}var rt=(()=>{class e{projectsStore=s(F);modalService=s(ce);ngOnInit(){this.projectsStore.getProjects({})}createProject(t){this.projectsStore.createProject({payload:t}),this.modalService.setInvisible()}static \u0275fac=function(o){return new(o||e)};static \u0275cmp=C({type:e,selectors:[["kms-projects"]],standalone:!0,features:[h],decls:4,vars:3,consts:[["skeleton",""],[4,"ngIf","ngIfElse"],[3,"onHide",4,"ngIf"],[3,"project",4,"ngFor","ngForOf"],[1,"new-project",3,"click"],["aria-hidden","true",1,"fa","fa-plus-square-o"],[3,"project"],[3,"onHide"],[1,"modal-content"],["formTitle","Create new Project",3,"onFormSubmit","checkEmail"]],template:function(o,n){if(o&1&&f(0,_e,6,1,"ng-container",1)(1,Ce,1,0,"ng-template",null,0,R)(3,ue,3,1,"kms-modal",2),o&2){let O=U(2);a("ngIf",n.projectsStore.projects())("ngIfElse",O),r(3),a("ngIf",n.modalService.isVisible())}},dependencies:[k,H,x,G,L,ae,me],styles:["[_nghost-%COMP%]{display:grid;grid-template-columns:repeat(4,1fr);gap:1rem;padding:2rem 10rem 0}[_nghost-%COMP%]   .new-project[_ngcontent-%COMP%]{min-height:12rem;background:var(--greyLight-1);box-shadow:var(--shadow);border-radius:1rem;display:flex;flex-direction:column;align-items:center;justify-content:center;gap:1rem;cursor:pointer;color:var(--greyLight-3);transition:.3s}[_nghost-%COMP%]   .new-project[_ngcontent-%COMP%]:hover{color:var(--primary)}[_nghost-%COMP%]   .new-project[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{font-size:5rem}[_nghost-%COMP%]   .new-project[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{font-size:1.5rem}"],changeDetection:0})}return e})();export{rt as ProjectsComponent};
